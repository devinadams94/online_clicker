# Yomi Generation Fix

## Issues Fixed

1. **Incorrect Rate Calculation**: The yomi generation rate was being divided by 10 twice (multiplied by 0.01 then divided by 10), resulting in 10x slower generation than intended.

2. **Wrong Display Formula**: The UI was showing `(memory + cpuLevel) * 0.005` per second, but yomi is actually generated based on CPU level only at a rate of `cpuLevel * 0.1` per second.

3. **Missing Condition Check**: In one location, the code wasn't checking if CPU level >= 30 or space age was unlocked before generating yomi.

## Changes Made

### 1. Fixed Rate Calculation (`src/lib/gameStore.ts`)
- Changed `const yomiRate = state.cpuLevel * 0.01 / 10;` to `const yomiRate = state.cpuLevel * 0.01;`
- This gives 0.01 yomi per tick (10 ticks/second) = 0.1 yomi per second per CPU level

### 2. Fixed Display (`src/components/game/ResourcesPanel.tsx`)
- Changed display from `(memory + cpuLevel) * 0.005` to `cpuLevel * 0.1`
- Added "(when OPs full)" to clarify the condition

### 3. Added Condition Checks
- Added `(state.cpuLevel >= 30 || state.spaceAgeUnlocked)` check in both yomi generation locations

## How Yomi Generation Works

1. **Requirements**:
   - CPU Level must be 30+ OR Space Age must be unlocked
   - OPs must be at maximum capacity

2. **Generation Rate**:
   - 0.1 yomi per second per CPU level
   - Example: CPU Level 7 = 0.7 yomi per second (when OPs are full)

3. **OPs Generation**:
   - OPs are generated by consuming memory (0.1 memory per tick = 1 memory per second)
   - Each memory consumed generates 50 OPs
   - OPs must reach maximum before yomi generation begins

## Testing
1. Ensure CPU level is 30+ or Space Age is unlocked
2. Let OPs fill to maximum
3. Yomi should generate at 0.1 per second per CPU level
4. The display should show the correct rate